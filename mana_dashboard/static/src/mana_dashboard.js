/** @odoo-module alias=mana_dashboard.dashboard **/
const a0_0x3257f=a0_0x333f;(function(_0xbee2c6,_0x5e3b00){const _0x464243=a0_0x333f,_0x155b1b=_0xbee2c6();while(!![]){try{const _0x427ef5=parseInt(_0x464243(0x1cc))/0x1+-parseInt(_0x464243(0x1bf))/0x2+-parseInt(_0x464243(0x251))/0x3+-parseInt(_0x464243(0x246))/0x4*(-parseInt(_0x464243(0x258))/0x5)+-parseInt(_0x464243(0x1eb))/0x6*(parseInt(_0x464243(0x1c6))/0x7)+parseInt(_0x464243(0x243))/0x8*(parseInt(_0x464243(0x252))/0x9)+-parseInt(_0x464243(0x1fe))/0xa;if(_0x427ef5===_0x5e3b00)break;else _0x155b1b['push'](_0x155b1b['shift']());}catch(_0x5bd6bc){_0x155b1b['push'](_0x155b1b['shift']());}}}(a0_0x7d05,0xd6e65));
 import {Component,useRef,onMounted,onWillStart,onWillUnmount}  from '@odoo/owl';
 function a0_0x333f(_0x4b6922,_0x13d087){const _0x7d05d8=a0_0x7d05();return a0_0x333f=function(_0x333f76,_0x54fabb){_0x333f76=_0x333f76-0x1a4;let _0xdbb017=_0x7d05d8[_0x333f76];return _0xdbb017;},a0_0x333f(_0x4b6922,_0x13d087);}
 import {_t}  from '@web/core/l10n/translation';
 import {useService,useOwnedDialogs}  from '@web/core/utils/hooks';
 import {registry}  from '@web/core/registry';
 import {editor_preset}  from '@mana_dashboard/editor_preset/editor_preset';
 function a0_0x7d05(){const _0x3f2188=['user_context','lang','value','template_external_id','dashboard_css','res_id','get_system_variable','dashboard_js','themeData','get_mode','dashboard_data','getElementById','props','_loaDashboard','display','concat','dashboard_id','get_editor_mode','destroy','kwargs','bind','endOf','context','root','ref_config','addMessages','addAttributes','top','custom_events','parse','get_row_by_value','height','drilling','index','get_theme_name','init_dashboard','startOf','runCommand','apply','data_source_type_name','parent','doAction','width','setup','get_env','orm','has_domain_field','get_last_search','left','getSelected','StyleManager','loadJS','loadCSS','getHtml','867864ZjXUAu','includes','onWillUnmount','4bHTayk','editor','raw_config','close','then','get_data_source','append','bus','getPanel','rootRef','</div></div>','517443SAGozp','117vPGzlM','addDialog','is_prevew_widget','field_name','data','getSession','5342390xWJVwX','dashboard_html','model_name','addButton','stringify','extend','view','theme','env','components','component_type','action_blocks','get_theme_data','template','set_theme','_bind_editor_events','action_block_svg','forEach','getElementsByTagName','push','reload_config','length','svg_icon','_on_editor_ready','replace','config_name','_do_search','_on_component_drop','ready_configs','system_variables','createElement','innerHTML','is_all_depend_config_ready','3213018IJhgon','_on_config_ready','load_css','model','special','theme_info','currentTarget','2252817JkUPgK','trigger','template_inited','padding','getCss','format','815789zEjKFL','toHTML','Panels','template_id','split','margin','Canvas','themeBuilder','addProperty','load_custom_css','default_template_cache','getElement','do_action','custom_css','full_name','get_default_template','remove','get_custom_css_id','attr','load_favorite_blocks','BlockManager','isEditorReady','call','link_to_config','get_config_id','js_urls','appendChild','init_action_blocks','classList','firstNode','type','6maHOzG','add','category','_on_drill_down','style_urls','load_js','onReady','mode','get','theme_builder','save_dashboard','assign','config_id','canBeRemoved','_on_view_chart_data','notification','domain','params','set_cavas_preview','3134960OYAqZP','action','find','<div\x20class=\x22o_content\x22\x20data-gjs-type=\x22content\x22>\x0a\x20\x20\x20\x20<div\x20data-gjs-type=\x22container\x22\x20class=\x22container-fluid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22bsrow\x22\x20class=\x22row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22bsrow\x22\x20class=\x22row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22bsrow\x22\x20class=\x22row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22bsrow\x22\x20class=\x22row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-gjs-type=\x22column\x22\x20class=\x22col\x20col-md-4\x20col-sm-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a</div>','dialog','select','get_categories','isArray','is_editor_ready','getAll','search_infos','name','_onButtonClick','_on_drill_up','style'];a0_0x7d05=function(){return _0x3f2188;};return a0_0x7d05();}
 import {BlockRegistry}  from '@mana_dashboard_base/mana_block_registry';
 import {SelectCreateDialog}  from '@web/views/view_dialogs/select_create_dialog';
 import {FormViewDialog}  from '@web/views/view_dialogs/form_view_dialog';
 import {session}  from '@web/session';
 import {ThemeBuilder}  from '@mana_dashboard/theme_builder/theme_builder';
 import {evaluateExpr}  from '@web/core/py_js/py';
 import {mountComponent}  from '@web/env';
 import  a0_0x224292  from '@mana_dashboard/trait/form_trait';
 import  a0_0x1a98be  from '@mana_dashboard/trait/option_trait';let dashboards={};const default_components=a0_0x3257f(0x201);
export  class ManaDashboard extends Component{[a0_0x3257f(0x238)](){const _0x576b03=a0_0x3257f;super[_0x576b03(0x238)](arguments),this[_0x576b03(0x229)]={'mana_dashboard.drill_down':this[_0x576b03(0x1ee)]['bind'](this),'mana_dashboard.drill_up':this[_0x576b03(0x20b)][_0x576b03(0x221)](this),'mana_dashboard.view_chart_data':this[_0x576b03(0x1f9)][_0x576b03(0x221)](this),'mana_dashboard.linked_actions':this['_on_linked_actions'][_0x576b03(0x221)](this),'mana_dashboard.change_default_template':this['_on_change_default_template'][_0x576b03(0x221)](this),'mana_dashboard.do_search':this[_0x576b03(0x1b8)][_0x576b03(0x221)](this)};let _0x3c9c58=this[_0x576b03(0x219)]['action'][_0x576b03(0x1fc)];this[_0x576b03(0x21d)]=_0x3c9c58['dashboard_id'],this[_0x576b03(0x1f2)]=_0x3c9c58[_0x576b03(0x1f2)]||'view',this[_0x576b03(0x24f)]=useRef('root'),this[_0x576b03(0x23a)]=useService('orm'),this[_0x576b03(0x1fa)]=useService('notification'),this[_0x576b03(0x202)]=useService('dialog'),this[_0x576b03(0x1ff)]=useService('action');if(!this[_0x576b03(0x21d)]){this[_0x576b03(0x1ff)][_0x576b03(0x236)]({'name':_t('Dashboard'),'type':'ir.actions.act_window','res_model':'mana_dashboard.dashboard','target':'current','views':[[![],'list'],[![],'form']]},{'clearBreadcrumbs':!![]});return;}this[_0x576b03(0x253)]=useOwnedDialogs(),this['loaded_libs']=[],this[_0x576b03(0x1d6)]={},this[_0x576b03(0x1ba)]={},dashboards[this[_0x576b03(0x21d)]]=this,onWillStart(async()=>{await this['_loaDashboard']();}),onWillUnmount(()=>{const _0x447963=_0x576b03;this[_0x447963(0x245)]();}),onMounted(()=>{const _0x1e8ceb=_0x576b03;this[_0x1e8ceb(0x230)]();});}[a0_0x3257f(0x21e)](){const _0x5c9628=a0_0x3257f;return this[_0x5c9628(0x1f2)];}[a0_0x3257f(0x1d8)](){const _0x3b6c0a=a0_0x3257f;this['action'][_0x3b6c0a(0x236)][_0x3b6c0a(0x233)](this[_0x3b6c0a(0x1ff)],arguments);}[a0_0x3257f(0x239)](){const _0x1485fc=a0_0x3257f;return this[_0x1485fc(0x1a6)];}['trigger_up'](_0x378084,_0x4f99f7){const _0x228853=a0_0x3257f;_0x378084 in this[_0x228853(0x229)]&&this[_0x228853(0x229)][_0x378084](_0x4f99f7);}[a0_0x3257f(0x230)](){const _0x1045b2=a0_0x3257f;let _0x5b3fce=this;this[_0x1045b2(0x1f2)]=='view'&&this[_0x1045b2(0x24f)]['el'][_0x1045b2(0x1e8)]['add']('o_mana_view_mode');this[_0x1045b2(0x1d5)]();let _0x421198=['blocks-bootstrap4','grapesjs-style-bg'];this[_0x1045b2(0x1f2)]!='view'&&_0x421198['push'](editor_preset);let _0x29124d=BlockRegistry[_0x1045b2(0x207)]();for(var _0x4e002c=0x0;_0x4e002c<_0x29124d[_0x1045b2(0x1b3)];_0x4e002c++){_0x421198['push'](_0x29124d[_0x4e002c]);}let _0xcf49a9=session['user_context'][_0x1045b2(0x20e)];if(_0xcf49a9=='zh_CN')_0xcf49a9='zh';else _0xcf49a9=='zh_TW'?_0xcf49a9='zh-tw':_0xcf49a9=_0xcf49a9[_0x1045b2(0x1d0)]('_')[0x0];let _0x1425fc={'showOffsets':0x1,'noticeOnUnload':0x0,'container':this[_0x1045b2(0x24f)]['el'],'height':'100%','fromElement':![],'jsInHtml':![],'cssInHtml':![],'editor_mode':this['mode'],'storageManager':{'autoload':0x0,'autosave':0x0},'plugins':_0x421198,'allowScripts':0x0,'storageManager':![],'dashboard':this,'i18n':{'locale':_0xcf49a9,'localeFallback':'en','messages':{'zh':_[_0x1045b2(0x25d)](grapesjs['zh'],{}),'en':_[_0x1045b2(0x25d)](grapesjs['en'],{})}},'pluginsOpts':{'grapesjs-style-gradient':{'colorPicker':'default','grapickOpts':{'min':0x1,'max':0x63}}},'assetManager':{'custom':{'open'(_0x2e5164){_0x5b3fce['addDialog'](SelectCreateDialog,{'title':_t('Choose Image'),'noCreate':![],'multiSelect':![],'resModel':'mana_dashboard.assets','context':{'tree_view_ref':'mana_dashboard.choose_assets_list','search_default_group_by_sub_type':0x1,'expand':0x1},'onSelected':async _0x5b79f8=>{const _0x302ecb=a0_0x333f;let _0x4434b3=_0x5b79f8[0x0],_0x4797d8=await _0x5b3fce[_0x302ecb(0x23a)][_0x302ecb(0x1e2)]('mana_dashboard.assets','get_asset_data',[_0x4434b3]);_0x2e5164[_0x302ecb(0x203)]&&_0x2e5164[_0x302ecb(0x203)](_0x4797d8,!![]),_0x2e5164[_0x302ecb(0x249)]();}},{'onClose':()=>{_0x2e5164['close']();}});},'close'(_0x25e22d){const _0x56fdc7=_0x1045b2;_0x25e22d[_0x56fdc7(0x249)](),_0x5b3fce[_0x56fdc7(0x1ff)][_0x56fdc7(0x236)]({'type':'ir.actions.act_window_close'});}}},'styleManager':{'sectors':[{'name':'General','open':![],'buildProps':['float','display','position','top','right','left','bottom','z-index','overflow']},{'name':'Flex','open':![],'buildProps':['flex-direction','flex-wrap','justify-content','align-items','align-content','order','flex-basis','flex-grow','flex-shrink','align-self']},{'name':'Dimension','open':![],'buildProps':['width','height','max-width','min-height','margin','padding']},{'name':'Typography','open':![],'buildProps':['font-family','font-size','font-weight','letter-spacing','color','line-height','text-align','text-shadow'],'properties':[{'property':'text-align','list':[{'value':'left','className':'fa fa-align-left'},{'value':'center','className':'fa fa-align-center'},{'value':'right','className':'fa fa-align-right'},{'value':'justify','className':'fa fa-align-justify'}]}]},{'name':'Decorations','open':![],'buildProps':['border-radius-c','background-color','border-radius','border','border-left','border-right','border-top','border-bottom','box-shadow']},{'name':'Extra','open':![],'buildProps':['transition','perspective','transform']}]}};this['mode']=='view'&&(_0x1425fc['panels']={'defaults':[]});if(this[_0x1045b2(0x217)][_0x1045b2(0x259)]){_0x1425fc['components']=this[_0x1045b2(0x217)][_0x1045b2(0x259)];let _0x26afc6=this[_0x1045b2(0x217)][_0x1045b2(0x211)];_0x26afc6&&(_0x26afc6=_0x26afc6[_0x1045b2(0x1b6)](/body\s*\{/g,'[data-gjs-type="wrapper"]{'));_0x1425fc['style']=_0x26afc6,_0x1425fc['scripts']=this[_0x1045b2(0x217)][_0x1045b2(0x214)];let _0x152b88={};this['dashboard_data'][_0x1045b2(0x1ef)]&&(_0x152b88['styles']=this[_0x1045b2(0x217)]['style_urls']),this[_0x1045b2(0x217)][_0x1045b2(0x1e5)]&&(_0x152b88['scripts']=this[_0x1045b2(0x217)][_0x1045b2(0x1e5)]),Object['keys'](_0x152b88)[_0x1045b2(0x1b3)]>0x0&&(_0x1425fc['canvas']=_0x152b88);}else _0x1425fc[_0x1045b2(0x1a7)]=default_components;this[_0x1045b2(0x247)]=grapesjs['init'](_0x1425fc),this[_0x1045b2(0x247)][_0x1045b2(0x23f)][_0x1045b2(0x1d4)]('decorations',[{'name':'background','property':'background','type':'bg'}]),this[_0x1045b2(0x247)]['Panels'][_0x1045b2(0x25b)]('views',{'id':'theme-builder','className':'fa fa-adjust','command':'open-theme-builder','attributes':{'title':'Theme'}}),this['editor']['I18n'][_0x1045b2(0x226)]({'en':{'styleManager':{'properties':{'background-repeat':'Repeat','background-position':'Position','background-attachment':'Attachment','background-size':'Size'}}}}),this[_0x1045b2(0x1f2)]=='view'?this['set_cavas_preview']():(a0_0x224292(this[_0x1045b2(0x247)],{'dashboard':this}),a0_0x1a98be(this[_0x1045b2(0x247)],{'dashboard':this}),this['_bind_editor_events'](),this['registCommonds'](),this[_0x1045b2(0x1df)]()),this[_0x1045b2(0x247)][_0x1045b2(0x1f1)](()=>{this['mode']=='view'&&setTimeout(()=>{const _0x2de01c=a0_0x333f;this[_0x2de01c(0x247)][_0x2de01c(0x232)]('preview');},0x0),this['_on_editor_ready']();});}[a0_0x3257f(0x216)](){const _0x149c17=a0_0x3257f;return this[_0x149c17(0x1f2)];}[a0_0x3257f(0x1fd)](){const _0x662f92=a0_0x3257f,_0x265f3a=editor[_0x662f92(0x1d2)][_0x662f92(0x1d7)](),_0x4a8478=_0x265f3a[_0x662f92(0x20c)];_0x4a8478[_0x662f92(0x237)]='100%',_0x4a8478[_0x662f92(0x22c)]='100%',_0x4a8478[_0x662f92(0x228)]='0',_0x4a8478[_0x662f92(0x23d)]='0',_0x4a8478[_0x662f92(0x1c9)]='0',_0x4a8478[_0x662f92(0x1d1)]='0';}['get_dashboard_id'](){return this['dashboard_id'];}[a0_0x3257f(0x206)](){const _0x4a83aa=a0_0x3257f;return this[_0x4a83aa(0x247)]&&this[_0x4a83aa(0x1e1)];}['_rpc'](_0x5d0fcf){const _0x1e67d1=a0_0x3257f;let _0xfc7f4c=_0x5d0fcf[_0x1e67d1(0x1c2)],_0x4a1096=_0x5d0fcf['method'],_0x2e4daf=_0x5d0fcf['args']||[],_0x481ed3=_0x5d0fcf[_0x1e67d1(0x220)]||{},_0xc1feb=_0x5d0fcf[_0x1e67d1(0x1fb)]||[];_0x5d0fcf[_0x1e67d1(0x1fb)]&&(_0x481ed3['domain']=_0xc1feb,delete _0x5d0fcf[_0x1e67d1(0x1fb)]);let _0x43d918=_0x5d0fcf['context']||{};return _0x5d0fcf[_0x1e67d1(0x223)]&&(_0x481ed3['context']=_0x43d918,delete _0x5d0fcf[_0x1e67d1(0x223)]),(!_0xfc7f4c||!_0x4a1096)&&raise('model and method is required'),this['orm'][_0x1e67d1(0x1e2)](_0xfc7f4c,_0x4a1096,_0x2e4daf,_0x481ed3);}async[a0_0x3257f(0x1b5)](){const _0x5e6f11=a0_0x3257f;this[_0x5e6f11(0x1e1)]=!![],this[_0x5e6f11(0x217)][_0x5e6f11(0x1cf)]&&!this[_0x5e6f11(0x217)][_0x5e6f11(0x1c8)]&&this[_0x5e6f11(0x1a6)][_0x5e6f11(0x24d)][_0x5e6f11(0x1c7)]('mana_dashboard.init_config',this[_0x5e6f11(0x21d)]),await this['_do_search'](),this['env'][_0x5e6f11(0x24d)][_0x5e6f11(0x1c7)]('mana_dashboard.editor_ready',this['dashboard_id']);}['_on_change_default_template'](_0x1b3f9d){const _0x5712cd=a0_0x3257f;let _0x34e29a=_0x1b3f9d[_0x5712cd(0x256)];this[_0x5712cd(0x1d6)][_0x34e29a[_0x5712cd(0x1a8)]]=_0x34e29a[_0x5712cd(0x210)];}[a0_0x3257f(0x1ad)](){const _0x406575=a0_0x3257f;this[_0x406575(0x247)]['on']('canvas:drop',this[_0x406575(0x1b9)][_0x406575(0x221)](this),this),this[_0x406575(0x247)]['on']('component:remove:before',this['on_component_remove'][_0x406575(0x221)](this),this),this[_0x406575(0x247)]['on']('mana_dashboard.config_ready',this['_on_config_ready'][_0x406575(0x221)](this),this),this[_0x406575(0x247)]['on']('preview:started',()=>{const _0x2902f7=_0x406575;this[_0x2902f7(0x1f2)]='view';},this),this[_0x406575(0x247)]['on']('preview:stopped',()=>{const _0x324a82=_0x406575;this[_0x324a82(0x1f2)]='edit';},this);}[a0_0x3257f(0x1be)](_0x55beb8){for(let _0x5a184b of _0x55beb8){if(!(_0x5a184b in this['ready_configs']))return![];}return!![];}[a0_0x3257f(0x1c0)](_0x552621){const _0x176f35=a0_0x3257f;let _0x2e7d4e=_0x552621['get']('attributes'),_0x189397=_0x2e7d4e['config_id'];if(_0x189397){_0x189397=parseInt(_0x189397);if(_0x189397 in this['ready_configs'])return;this[_0x176f35(0x1ba)][_0x189397]=_0x552621,this[_0x176f35(0x1a6)][_0x176f35(0x24d)][_0x176f35(0x1c7)]('mana_dashboard.config_ready',this[_0x176f35(0x21d)],_0x189397);}}async['on_component_remove'](_0x206a3d){const _0x3ecc6e=a0_0x3257f;if(this[_0x3ecc6e(0x22d)])return;let _0x20d187=_0x206a3d['get']('attributes');if(!_0x20d187)return;let _0x2c4a21=parseInt(_0x20d187['config_id']),_0x47e695=[_0x2c4a21],_0x15c3e1=_0x206a3d[_0x3ecc6e(0x1f3)]('components')||[],_0x2f0976=function(_0x119fe0){const _0x72e304=_0x3ecc6e;_0x119fe0[_0x72e304(0x1af)](function(_0x3b1392){const _0x363e06=_0x72e304;let _0x28ba5a=_0x3b1392[_0x363e06(0x1f3)]('attributes');if(_0x28ba5a){let _0x5c00bb=_0x28ba5a['config_id'];_0x5c00bb&&(_0x5c00bb=parseInt(_0x5c00bb),_0x47e695['push'](_0x5c00bb));}let _0x53d6c2=_0x3b1392[_0x363e06(0x1f3)]('components');_0x53d6c2&&_0x2f0976(_0x53d6c2);});};_0x2f0976(_0x15c3e1),_0x2c4a21&&this[_0x3ecc6e(0x23a)][_0x3ecc6e(0x1e2)]('mana_dashboard.any_config','unlink',[_0x47e695]);}[a0_0x3257f(0x1db)](_0x226d99){const _0x31a059=a0_0x3257f;return this[_0x31a059(0x1d6)][_0x226d99];}async[a0_0x3257f(0x1b9)](_0x3d9d13,_0x4360b6){const _0xbb10d2=a0_0x3257f;let _0x3a0d96=_0x4360b6['get']('config_model');if(_0x4360b6['get']('has_config')){let _0x1f9838=_0x4360b6[_0xbb10d2(0x1f3)]('type'),_0x3fd3ce=_0x4360b6[_0xbb10d2(0x1f3)]('attributes')[_0xbb10d2(0x1ab)];!_0x3fd3ce&&(_0x3fd3ce=this['default_template_cache'][_0x1f9838]||_0x4360b6[_0xbb10d2(0x1f3)]('default_template'));let _0x44129a=await this[_0xbb10d2(0x23a)]['call']('mana_dashboard.any_config','create_config',[this[_0xbb10d2(0x21d)],_0x3a0d96,{'default_template':_0x3fd3ce,'template_category':_0x4360b6[_0xbb10d2(0x1f3)]('template_category'),'template_type':_0x4360b6['get']('template_type')}]);_0x4360b6[_0xbb10d2(0x227)]({'config_id':_0x44129a[_0xbb10d2(0x1f7)]}),this['save_dashboard'](this[_0xbb10d2(0x247)],![]);}}['get_theme_info'](){const _0x5ecb52=a0_0x3257f;return this[_0x5ecb52(0x1c4)];}[a0_0x3257f(0x1aa)](){const _0x3998b1=a0_0x3257f;return this[_0x3998b1(0x215)];}['set_theme'](_0x1dd765,_0x54e294=![]){const _0x19f640=a0_0x3257f;this['themeData']=_0x1dd765[_0x19f640(0x215)],this[_0x19f640(0x1a5)]=_0x1dd765[_0x19f640(0x1a5)],this[_0x19f640(0x1c4)]=_0x1dd765,echarts['registerTheme'](this['get_theme_name'](),this['theme']),!_0x54e294&&this['env'][_0x19f640(0x24d)][_0x19f640(0x1c7)]('mana_dashboard.dashboard_theme_changed',this['theme']);}[a0_0x3257f(0x22f)](){const _0x17150b=a0_0x3257f;return'mana_dashboard.theme_'+this[_0x17150b(0x21d)];}[a0_0x3257f(0x1f5)](_0x53e62a,_0xbb6617=!![]){const _0x132f44=a0_0x3257f;let _0xf5cf8d=_0x53e62a[_0x132f44(0x242)](),_0x71a9de=_0x53e62a[_0x132f44(0x1ca)]();this[_0x132f44(0x23a)][_0x132f44(0x1e2)]('mana_dashboard.dashboard','write',[this['dashboard_id'],{'dashboard_html':_0xf5cf8d,'dashboard_css':_0x71a9de,'default_template_info':JSON[_0x132f44(0x25c)](this[_0x132f44(0x1d6)]||{})}])[_0x132f44(0x24a)](()=>{const _0x4c0331=_0x132f44;_0xbb6617&&this[_0x4c0331(0x1fa)][_0x4c0331(0x1ec)](_t('Success'),{'type':'success'});});}['registCommonds'](){const _0x419158=a0_0x3257f;let _0x1f24da=this;const _0x737b67=this[_0x419158(0x247)]['Commands'];_0x737b67['add']('save-html',_0x5754fa=>{this['save_dashboard'](_0x5754fa,!![]);}),_0x737b67[_0x419158(0x1ec)]('open-theme-builder',{'run':async _0x355c0d=>{const _0x49933a=_0x419158,_0x49b801=_0x355c0d[_0x49933a(0x1ce)];if(!this[_0x49933a(0x1f4)]){const _0x5cdc6a='views-container',_0x44f948=document[_0x49933a(0x1bc)]('div'),_0x52ffc1=_0x49b801[_0x49933a(0x24e)](_0x5cdc6a)||_0x49b801['addPanel']({'id':_0x5cdc6a});let _0x26965d=$('<div style="wdith:100%; height:100%"/>');_0x44f948[_0x49933a(0x1e6)](_0x26965d[_0x49933a(0x1f3)](0x0)),_0x52ffc1['set']('appendContent',_0x44f948)[_0x49933a(0x1c7)]('change:appendContent'),setTimeout(async()=>{const _0x129c64=_0x49933a;this['theme_builder']=await mountComponent(ThemeBuilder,_0x26965d[_0x129c64(0x1f3)](0x0),{'env':this[_0x129c64(0x1a6)],'translateFn':_t,'translatableAttributes':['data-tooltip'],'props':{'dashboard':this}});},0x0);}else this[_0x49933a(0x1f4)][_0x49933a(0x224)][_0x49933a(0x1e9)]()['style']['display']='block';},'stop'(){const _0x4c7e11=_0x419158,{theme_builder:_0x56d152}=_0x1f24da;_0x56d152&&(_0x56d152[_0x4c7e11(0x224)][_0x4c7e11(0x1e9)]()[_0x4c7e11(0x20c)][_0x4c7e11(0x21b)]='none');}}),_0x737b67[_0x419158(0x1ec)]('history-back',_0x4c518e=>{const _0xa117ad=_0x419158;this[_0xa117ad(0x1ff)]['doAction']({'type':'ir.actions.act_window','res_model':'mana_dashboard.dashboard','target':'current','views':[[![],'list'],[![],'form']]},{'clearBreadcrumbs':!![]});}),_0x737b67['add']('view-code',_0x143d85=>{}),_0x737b67[_0x419158(0x1ec)]('edit_config',async(_0x3092a9,_0x3637b1,_0x324012)=>{const _0x3969b4=_0x419158;let _0x384523=_0x3092a9[_0x3969b4(0x23e)](),_0x361a71=_0x384523['get']('attributes')['config_id'];_0x361a71=parseInt(_0x361a71);let _0x79cc3e=_0x361a71,_0x42039a=_0x384523['get']('config_model'),_0x3ad54b=_0x384523[_0x3969b4(0x1f3)]('config_form_res_id'),_0x3a6329=null;if(!_0x361a71)await this['orm'][_0x3969b4(0x1e2)]('mana_dashboard.any_config','create_config',[this[_0x3969b4(0x21d)],_0x42039a,{'default_template':_0x384523[_0x3969b4(0x1f3)]('default_template'),'template_category':_0x384523[_0x3969b4(0x1f3)]('template_category'),'template_type':_0x384523['get']('template_type')}],{'shadow':!![]}),_0x384523['addAttributes']({'config_id':result[_0x3969b4(0x1f7)]}),_0x361a71=result['ref_config_id'];else{let _0x38d02e=_0x384523['get']('config');if(!_0x38d02e){this['notification'][_0x3969b4(0x1ec)](_t('Can not find the config'),{'type':'danger'});return;}_0x361a71=_0x38d02e[_0x3969b4(0x1e4)]();}let _0x3929ef=_0x384523['toHTML']();_0x3929ef=_0x3929ef[_0x3969b4(0x1b6)](/\s+id="[^"]*"/g,''),_0x1f24da[_0x3969b4(0x253)](FormViewDialog,{'title':_t('Edit Config'),'resModel':_0x42039a,'resId':_0x361a71,'preventCreate':!![],'size':'max-width-90','context':{'dialog_size':'max-width-90','form_view_ref':_0x3ad54b,'content':_0x3929ef,'theme_name':this[_0x3969b4(0x22f)](),'fullscreen':!![],'inDialog':!![],'config_id':_0x361a71,'any_config_id':_0x79cc3e,'dashboard_id':this[_0x3969b4(0x21d)]},'onRecordSaved':async _0x35b168=>{const _0x3c2f5f=_0x3969b4;let _0x442232=_0x384523[_0x3c2f5f(0x1a4)];_0x442232&&_0x384523[_0x3c2f5f(0x1b2)](!![]);let _0x1e2222=_0x35b168['data'][_0x3c2f5f(0x1e3)];if(_0x1e2222){let _0x4aaf8b=_0x1e2222[_0x3c2f5f(0x256)]['id'];this[_0x3c2f5f(0x1a6)][_0x3c2f5f(0x24d)]['trigger']('mana_dashboard.reload_config',_0x4aaf8b);}}});}),_0x737b67[_0x419158(0x1ec)]('edit_svg',async(_0x412d8d,_0x188023,_0x462df3)=>{const _0x2b9fd3=_0x419158;let _0x973293=_0x412d8d['getSelected'](),_0x826352=_0x973293['toHTML']();this[_0x2b9fd3(0x253)](FormViewDialog,{'title':_t('Edit SVG'),'resModel':'mana_dashboard.content_editor','preventCreate':!![],'size':'max-width-90','context':{'default_content':_0x826352,'form_view_ref':'mana_dashboard.content_editor_form'},'onRecordSaved':async _0x1a6345=>{const _0x33fa8f=_0x2b9fd3;let _0x53cc6b=_0x1a6345[_0x33fa8f(0x256)]['content'],_0x15982c=_0x973293['parent'](),_0x38f9b5=_0x973293['index']();_0x973293[_0x33fa8f(0x1dc)](),_0x15982c['append'](_0x53cc6b,{'at':_0x38f9b5});}});}),_0x737b67['add']('drill_down',async(_0x30d3fb,_0x2cb6ed,_0xb8f1f2)=>{const _0x6e2ffa=_0x419158;let _0x5af23e=_0x30d3fb[_0x6e2ffa(0x23e)](),_0x5c378c=_0x5af23e[_0x6e2ffa(0x1f3)]('attributes')['config_id'];_0x5c378c=parseInt(_0x5c378c);let _0x29776a=_0x5af23e[_0x6e2ffa(0x1f3)]('config_model'),_0xcb6302=_0x5af23e[_0x6e2ffa(0x1f3)]('config_form_res_id'),_0x4f42ed=_0x5af23e['get']('config');if(!_0x4f42ed){this['notification'][_0x6e2ffa(0x1ec)](_t('No config found'),{'type':'danger'});return;}let _0x186f6c=_0x4f42ed[_0x6e2ffa(0x24b)]();if(!_0x186f6c){this[_0x6e2ffa(0x1fa)]['add'](_t('No data source found'),{'type':'danger'});return;}if(!_0x186f6c['is_valid']()){this[_0x6e2ffa(0x1fa)][_0x6e2ffa(0x1ec)](_t('Data source is not valid, please config the origin datasource first!'),{'type':'danger'});return;}let _0x4027b8=_0x186f6c[_0x6e2ffa(0x204)]();if(!_0x4027b8||_0x4027b8['length']==0x0){this[_0x6e2ffa(0x1fa)]['add'](_t('No category found'),{'type':'danger'});return;}let _0x348791=_0x4027b8[0x0][_0x6e2ffa(0x209)],_0x36b8d5=this[_0x6e2ffa(0x23a)][_0x6e2ffa(0x1e2)]({'model':'mana_dashboard.any_config','method':'get_drill_down_config','args':[_0x5c378c,{'config_form_res_id':_0xcb6302,'config_model':_0x29776a,'config_id':_0x5c378c,'dialog_size':'max-width-90','category_names':_0x348791,'theme_name':this[_0x6e2ffa(0x22f)](),'fullscreen':!![],'inDialog':!![],'dashboard_id':this[_0x6e2ffa(0x21d)]}]});if(!_0x36b8d5){this[_0x6e2ffa(0x1fa)]['add'](_t('No drill down config'),{'type':'danger'});return;}let _0x2e13ff=_0x5af23e[_0x6e2ffa(0x1cd)]();_0x2e13ff=_0x2e13ff[_0x6e2ffa(0x1b6)](/\s+id="[^"]*"/g,''),_0x2e13ff=_0x2e13ff[_0x6e2ffa(0x1b6)](/config_id="[^"]*"/g,'config_id="'+_0x36b8d5['res_id']+'"'),_0x36b8d5[_0x6e2ffa(0x223)]=_[_0x6e2ffa(0x25d)](_0x36b8d5[_0x6e2ffa(0x223)]||{},{'content':_0x2e13ff,'dashboard_id':this[_0x6e2ffa(0x21d)]}),this[_0x6e2ffa(0x1ff)]['doAction'](_0x36b8d5,{'onClose':_0x113cfa=>{const _0x5ea5ea=_0x6e2ffa;if(!_0x113cfa||_0x113cfa[_0x5ea5ea(0x1c3)]==!![])return;_0x5af23e[_0x5ea5ea(0x227)]({'drill_down_config_id':_0x113cfa[_0x5ea5ea(0x212)]}),_0x5af23e[_0x5ea5ea(0x1b2)]();}});});}[a0_0x3257f(0x1dd)](){const _0x57b4fb=a0_0x3257f;return'mana_dashboard_custom_css_'+this[_0x57b4fb(0x21d)];}['load_custom_css'](){const _0xe2349c=a0_0x3257f;let _0x5cda11=this[_0xe2349c(0x1dd)](),_0x38a802=document[_0xe2349c(0x218)](_0x5cda11);_0x38a802&&_0x38a802[_0xe2349c(0x1dc)]();let _0x2fe8a8=this[_0xe2349c(0x217)][_0xe2349c(0x1d9)];if(_0x2fe8a8){let _0x93ba73=document[_0xe2349c(0x1bc)]('style');_0x93ba73[_0xe2349c(0x1ea)]='text/css',_0x93ba73[_0xe2349c(0x1bd)]=_0x2fe8a8,_0x93ba73['id']=_0x5cda11,document[_0xe2349c(0x1b0)]('head')[0x0][_0xe2349c(0x1e6)](_0x93ba73);}}['getSystemVariables'](){let _0x11b137=this['system_variables'];return _0x11b137;}async[a0_0x3257f(0x21a)](){const _0xaa1ecc=a0_0x3257f;let _0x3440dd=await this[_0xaa1ecc(0x23a)][_0xaa1ecc(0x1e2)]('mana_dashboard.dashboard','load_dashboard',[this['dashboard_id']]);this['dashboard_data']=_0x3440dd,this[_0xaa1ecc(0x208)]=_0x3440dd[_0xaa1ecc(0x208)]||{};let _0xfeeee7=_0x3440dd[_0xaa1ecc(0x1c4)];_0xfeeee7&&(_0xfeeee7=JSON[_0xaa1ecc(0x22a)](_0xfeeee7),this[_0xaa1ecc(0x1ac)](_0xfeeee7,!![]));let _0x1b87a6=_0x3440dd[_0xaa1ecc(0x1bb)];this['system_variables']=_0x1b87a6||{},this[_0xaa1ecc(0x217)]['default_template_info']&&(this['default_template_cache']=JSON['parse'](this[_0xaa1ecc(0x217)]['default_template_info']||'{}'));}async[a0_0x3257f(0x1df)](){const _0x589a80=a0_0x3257f;await this[_0x589a80(0x23a)][_0x589a80(0x1e2)]('mana_dashboard.action_blocks','load_action_blocks',[])[_0x589a80(0x24a)](_0x4dc00b=>{const _0x1559e1=_0x589a80;this['action_blocks']=_0x4dc00b||[],this[_0x1559e1(0x1e7)]();});}[a0_0x3257f(0x213)](_0x12811d){const _0x50a84f=a0_0x3257f;return this[_0x50a84f(0x1bb)][_0x12811d];}[a0_0x3257f(0x1e7)](){const _0x46ddd3=a0_0x3257f;for(let _0x4442d1=0x0;_0x4442d1<this[_0x46ddd3(0x1a9)][_0x46ddd3(0x1b3)];_0x4442d1++){let _0x166ea1=this['action_blocks'][_0x4442d1];this['init_action_block'](_0x166ea1);}}['init_action_block'](_0x288218){const _0x14eaf0=a0_0x3257f;let _0x1f14e4=this[_0x14eaf0(0x247)],_0x191756=_0x288218[_0x14eaf0(0x1b4)];!_0x191756&&(_0x191756=icons[_0x14eaf0(0x1ae)]),_0x1f14e4[_0x14eaf0(0x1e0)][_0x14eaf0(0x1ec)](_0x288218[_0x14eaf0(0x209)],{'label':_0x288218[_0x14eaf0(0x209)],'render':()=>{const _0x4a6e57=_0x14eaf0;return'<div\x20class=\x22d-flex\x20flex-column\x20align-items-center\x20justify-content-center\x22><div\x20class=\x22chart-icon\x22>'+_0x191756+'</div><div\x20class=\x27anita-block-label\x27>'+_0x288218['name']+_0x4a6e57(0x250);},'category':{'label':_0x288218[_0x14eaf0(0x1ed)][0x1]},'content':()=>{var _0x282a98={'type':'action_block','props':{'action_info':_0x288218},'attributes':{'block_id':_0x288218['id']}};return _0x282a98;},'select':!![]});}[a0_0x3257f(0x1f8)](){const _0x1b311c=a0_0x3257f;if(this[_0x1b311c(0x247)]){if(this[_0x1b311c(0x1f2)]=='edit')return this[_0x1b311c(0x1f5)](this[_0x1b311c(0x247)],![]);}super[_0x1b311c(0x1f8)]();}['_on_view_chart_data'](_0x375a96){const _0x4939f4=a0_0x3257f;let _0x5e769b=_0x375a96[_0x4939f4(0x256)],_0x42dd4b=_0x5e769b['model'],_0x6cf291=_0x5e769b[_0x4939f4(0x1ed)],_0x564b64=_0x5e769b[_0x4939f4(0x20f)],_0xb18d67=_0x42dd4b[_0x4939f4(0x1f3)]('config'),_0x1585f5=_0xb18d67[_0x4939f4(0x248)];if(_0x1585f5[_0x4939f4(0x234)]=='model'){let _0x362c08=_0xb18d67[_0x4939f4(0x24b)](),_0x5782c9=_0x362c08['get_category_fields']()||[];if(_0x5782c9[_0x4939f4(0x1b3)]==0x0)return;let _0x1ae137=_0x5782c9[0x0],_0x359d01=_0x1585f5[_0x4939f4(0x223)]||{};_0x359d01=evaluateExpr(_0x359d01,session[_0x4939f4(0x20d)]);let _0x46e4a7=_0x1585f5[_0x4939f4(0x1fb)]||'[]';_0x46e4a7=evaluateExpr(_0x46e4a7,_0x359d01);if(_0x362c08[_0x4939f4(0x23b)]()&&_0x6cf291){let _0x2c1376=_0x362c08[_0x4939f4(0x22b)](_0x1ae137[_0x4939f4(0x1da)],_0x6cf291),_0x5ed92d=_0x2c1376['get_value']('__domain');if(_0x5ed92d){let _0x2127c3=[];!Array[_0x4939f4(0x205)](_0x5ed92d)?_0x2127c3=evaluateExpr(_0x5ed92d,_0x359d01):_0x2127c3=_0x5ed92d,_0x46e4a7=_0x46e4a7[_0x4939f4(0x21c)](_0x2127c3);}}else{if(_0x6cf291&&_0x564b64){let _0x2de6c4=_0x1ae137[_0x4939f4(0x1da)][_0x4939f4(0x1d0)](':');if(_0x2de6c4[_0x4939f4(0x1b3)]>0x1){_0x6cf291=_0x2de6c4[0x0];let _0x445aa2=_0x2de6c4[0x1];if(['year','quarter','month','week','day'][_0x4939f4(0x244)](_0x445aa2)){_0x564b64=moment(_0x564b64);switch(_0x445aa2){case'year':_0x46e4a7['push']([_0x1ae137[_0x4939f4(0x255)],'>=',_0x564b64[_0x4939f4(0x231)]('year')['format']('YYYY-MM-DD'),(_0x1ae137[_0x4939f4(0x255)],'<=',_0x564b64[_0x4939f4(0x222)]('year')[_0x4939f4(0x1cb)]('YYYY-MM-DD'))]);break;case'quarter':_0x46e4a7[_0x4939f4(0x1b1)]([_0x1ae137[_0x4939f4(0x255)],'>=',_0x564b64[_0x4939f4(0x231)]('quarter')[_0x4939f4(0x1cb)]('YYYY-MM-DD'),(_0x1ae137['field_name'],'<=',_0x564b64[_0x4939f4(0x222)]('quarter')['format']('YYYY-MM-DD'))]);break;case'month':_0x46e4a7['push']([_0x1ae137[_0x4939f4(0x255)],'>=',_0x564b64[_0x4939f4(0x231)]('month')['format']('YYYY-MM-DD'),(_0x1ae137[_0x4939f4(0x255)],'<=',_0x564b64['endOf']('month')['format']('YYYY-MM-DD'))]);break;case'week':_0x46e4a7[_0x4939f4(0x1b1)]([_0x1ae137[_0x4939f4(0x255)],'>=',_0x564b64['startOf']('week')[_0x4939f4(0x1cb)]('YYYY-MM-DD'),(_0x1ae137['field_name'],'<=',_0x564b64[_0x4939f4(0x222)]('week')[_0x4939f4(0x1cb)]('YYYY-MM-DD'))]);break;case'day':_0x46e4a7['push']([_0x1ae137[_0x4939f4(0x255)],'>=',_0x564b64[_0x4939f4(0x231)]('day')[_0x4939f4(0x1cb)]('YYYY-MM-DD'),(_0x1ae137['field_name'],'<=',_0x564b64[_0x4939f4(0x222)]('day')[_0x4939f4(0x1cb)]('YYYY-MM-DD'))]);break;}}else _0x46e4a7['push']([_0x1ae137[_0x4939f4(0x255)],'=',_0x6cf291]);}else _0x46e4a7[_0x4939f4(0x1b1)]([_0x1ae137[_0x4939f4(0x255)],'=',_0x6cf291]);}}let _0x975ed3={'name':_0x1585f5[_0x4939f4(0x1b7)]||'Chart Data','type':'ir.actions.act_window','res_model':_0x1585f5[_0x4939f4(0x25a)],'views':[[![],'list'],[![],'form']],'domain':_0x46e4a7,'context':{'default_group_by':_0x1ae137}};this[_0x4939f4(0x1ff)][_0x4939f4(0x236)](_0x975ed3);}}async[a0_0x3257f(0x20b)](_0x39e42f){const _0x2beef2=a0_0x3257f;let _0x232fee=_0x39e42f[_0x2beef2(0x256)],_0x3091cf=_0x232fee[_0x2beef2(0x1f7)],_0xbc7a2d=this[_0x2beef2(0x23a)]['call']('mana_dashboard.any_config','get_config',[_0x3091cf,{'fetch_data':![]}]),_0x5ab8c9=_0xbc7a2d['ref_config'],_0x18fe6a=_0x232fee['model'],_0x365373=_0x18fe6a['parent'](),_0x431a88=_0x18fe6a[_0x2beef2(0x22e)]();this['drilling']=!![],_0x18fe6a[_0x2beef2(0x1dc)](),this[_0x2beef2(0x22d)]=![],_0x365373[_0x2beef2(0x24c)]({'type':_0x5ab8c9[_0x2beef2(0x1a8)],'attributes':{'config_id':_0xbc7a2d['id']}},{'at':_0x431a88});}async[a0_0x3257f(0x1ee)](_0x1d4bff){const _0x1e6bfa=a0_0x3257f;let _0xc58246=_0x1d4bff[_0x1e6bfa(0x256)],_0x3a4bbc=_0xc58246[_0x1e6bfa(0x1f7)],_0xd92757=await this[_0x1e6bfa(0x23a)][_0x1e6bfa(0x1e2)]('mana_dashboard.any_config','get_config',[_0x3a4bbc]),_0x4a4329=_0xd92757[_0x1e6bfa(0x225)],_0x2343c7=_0xc58246[_0x1e6bfa(0x1c2)],_0x396180=_0x2343c7[_0x1e6bfa(0x235)](),_0x5e1743=_0x2343c7[_0x1e6bfa(0x22e)]();this[_0x1e6bfa(0x22d)]=!![],_0x2343c7['remove'](),this[_0x1e6bfa(0x22d)]=![],_0x396180[_0x1e6bfa(0x24c)]({'type':_0x4a4329[_0x1e6bfa(0x1a8)],'attributes':{'config_id':_0xd92757['id']},'drill_down_context':{'$drill_value':_0xc58246[_0x1e6bfa(0x20f)],'$drill_field':_0xc58246[_0x1e6bfa(0x1ed)]}},{'at':_0x5e1743});}['_on_linked_actions'](_0x4bba58){const _0x13f3d9=a0_0x3257f;let _0x246dca=_0x4bba58[_0x13f3d9(0x256)];core['bus'][_0x13f3d9(0x1c7)]('mana_dashboard.linked_block_changed',_0x246dca);}[a0_0x3257f(0x1c1)](_0x3126e1){const _0x189f48=a0_0x3257f;return ajax[_0x189f48(0x241)](_0x3126e1);}[a0_0x3257f(0x1f0)](_0x1362fd){const _0x2aa778=a0_0x3257f;return ajax[_0x2aa778(0x240)](_0x1362fd);}[a0_0x3257f(0x257)](){return session;}[a0_0x3257f(0x23c)](_0x3b72bf,_0x86b4d8){const _0x5f02e3=a0_0x3257f;if(!this[_0x5f02e3(0x208)])return![];let _0x4c48ed=this[_0x5f02e3(0x208)][_0x3b72bf];if(!_0x4c48ed)return![];return _0x4c48ed[_0x86b4d8];}['get_last_group_search_info'](_0x8f7e0d){const _0x2a39c1=a0_0x3257f;if(!this['search_infos'])return{};return this[_0x2a39c1(0x208)][_0x8f7e0d];}async[a0_0x3257f(0x20a)](_0x2b2fc3){const _0x1b81c9=a0_0x3257f;let _0x26f591=$(_0x2b2fc3[_0x1b81c9(0x1c5)]),_0xb0136d=_0x26f591[_0x1b81c9(0x1de)]('type');switch(_0xb0136d){case'action':let _0x433679=_0x26f591[_0x1b81c9(0x1de)]('name');if(!_0x433679)return;this['action'][_0x1b81c9(0x236)](_0x433679);break;case'object':let _0x5d9f05=_0x26f591[_0x1b81c9(0x1de)]('model'),_0x52ef34=_0x26f591[_0x1b81c9(0x1de)]('name'),_0x524bdc=_0x26f591[_0x1b81c9(0x1de)]('context')||'{}';if(!_0x5d9f05||!_0x52ef34)return;_0x524bdc&&(_0x524bdc=evaluateExpr(_0x524bdc,this[_0x1b81c9(0x257)]()[_0x1b81c9(0x20d)]));_0x524bdc=Object[_0x1b81c9(0x1f6)]({'dashboard_id':this[_0x1b81c9(0x21d)]},this[_0x1b81c9(0x257)]()[_0x1b81c9(0x20d)],_0x524bdc);let _0x4b64af=this[_0x1b81c9(0x23a)][_0x1b81c9(0x1e2)](_0x5d9f05,_0x52ef34,[],{'context':_0x524bdc});this['action']['doAction'](_0x4b64af);break;case'url':let _0x126a92=_0x26f591[_0x1b81c9(0x1de)]('url');if(!_0x126a92)return;this[_0x1b81c9(0x1ff)][_0x1b81c9(0x236)]({'type':'ir.actions.act_url','url':_0x126a92,'target':'_blank'});break;}}async[a0_0x3257f(0x1b8)](_0x586c3c){const _0x10fe4d=a0_0x3257f;let _0x1cfc99=_0x586c3c?![]:!![],_0x649815={};if(!_0x1cfc99){let _0x2d6991=$(this[_0x10fe4d(0x24f)]['el'])['find']('.search_group');_0x2d6991['each']((_0xbca3a3,_0x3ddac6)=>{const _0x68ffb2=_0x10fe4d;let _0x5a64eb=grapesjs['$'](_0x3ddac6),_0x5c69f1=_0x5a64eb[_0x68ffb2(0x256)]('model'),_0x2af991=_0x5c69f1['get_search_group_info']();_0x2af991&&(_0x649815[_0x2af991[_0x68ffb2(0x209)]]=_0x2af991);});}else{_0x649815=this[_0x10fe4d(0x208)];for(let _0x37e051 in _0x649815){let _0x3e801b='.search_group[name="'+_0x37e051+'"]',_0x5423d6=$(this['rootRef']['el'])[_0x10fe4d(0x200)](_0x3e801b);_0x5423d6[_0x10fe4d(0x1b3)]==0x0&&delete _0x649815[_0x37e051];}}await this[_0x10fe4d(0x23a)]['call']('mana_dashboard.dashboard','update_search_infos',[this[_0x10fe4d(0x21d)],_0x649815]),_0x1cfc99?this['env']['bus'][_0x10fe4d(0x1c7)]('mana_dashboard.notify_item_init_search',_0x649815):this['env'][_0x10fe4d(0x24d)][_0x10fe4d(0x1c7)]('mana_dashboard.notify_item_do_search',_0x649815);}[a0_0x3257f(0x254)](){return![];}['destroy'](){const _0x224513=a0_0x3257f;delete dashboards[this[_0x224513(0x21d)]],this[_0x224513(0x247)]&&(this[_0x224513(0x247)][_0x224513(0x203)](),setTimeout(()=>{const _0xe9bba=_0x224513;this[_0xe9bba(0x247)][_0xe9bba(0x21f)]();},0x0)),this[_0x224513(0x1d3)]&&this[_0x224513(0x1d3)][_0x224513(0x21f)]();}['onWillUnmount'](){const _0x5e713c=a0_0x3257f;this[_0x5e713c(0x21f)]();}};ManaDashboard['template']='mana_dashboard.dashboard',ManaDashboard['props']={'*':!![]},registry[a0_0x3257f(0x1ed)]('actions')[a0_0x3257f(0x1ec)]('mana_dashboard',ManaDashboard);